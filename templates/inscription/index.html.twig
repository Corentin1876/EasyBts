{% extends 'base.html.twig' %}

{% block title %}Inscription - Inscription BTS{% endblock %}

{% block body %}
{% for message in app.flashes('success') %}
    <div class="fr-container fr-mt-2v">
        <div class="fr-alert fr-alert--success">
            <p>{{ message }}</p>
        </div>
    </div>
{% endfor %}

{% for message in app.flashes('error') %}
    <div class="fr-container fr-mt-2v">
        <div class="fr-alert fr-alert--error">
            <p>{{ message }}</p>
        </div>
    </div>
{% endfor %}
<!-- Fil d'ariane -->
<nav class="fr-breadcrumb" aria-label="vous êtes ici :">
    <button class="fr-breadcrumb__button" aria-expanded="false" aria-controls="breadcrumb-2">Voir le fil d'Ariane</button>
    <div class="fr-collapse" id="breadcrumb-2">
        <ol class="fr-breadcrumb__list">
            <li>
                <a class="fr-breadcrumb__link" href="{{ path('app_home') }}">Accueil</a>
            </li>
            <li>
                <a class="fr-breadcrumb__link" aria-current="page">Inscription</a>
            </li>
        </ol>
    </div>
</nav>

<!-- En-tête de page -->
<section class="fr-container fr-py-6v">
    <div class="fr-grid-row">
        <div class="fr-col-12 fr-col-lg-8">
            <h1 class="fr-h1">Inscription aux formations BTS</h1>
            <p class="fr-text--lead fr-mb-3v">
                Créez votre compte ou connectez-vous pour démarrer votre inscription aux formations BTS.
                Le processus d'inscription se déroule en plusieurs étapes simples.
            </p>
        </div>
    </div>
</section>

<!-- Section connexion/inscription -->
<section class="fr-container fr-pb-6v">
    <div class="fr-grid-row fr-grid-row--gutters">
        <!-- Formulaire de connexion -->
        <div class="fr-col-12 fr-col-lg-6">
            <div class="fr-card fr-card--no-arrow">
                <div class="fr-card__body">
                    <div class="fr-card__content">
                        <h2 class="fr-card__title">Vous avez déjà un compte ?</h2>
                        <p class="fr-card__desc fr-mb-4v">
                            Connectez-vous pour accéder à votre espace personnel et poursuivre votre inscription.
                        </p>
                        <hr class="fr-hr fr-mb-4v">

                        <form class="fr-form" method="post" action="{{ path('app_login') }}">
                            {% if error %}
                                <div class="fr-alert fr-alert--error fr-mb-2v">
                                    <p>{{ error.messageKey|trans(error.messageData, 'security') }}</p>
                                </div>
                            {% endif %}

                            <div class="fr-input-group">
                                <label class="fr-label" for="login-email">
                                    Adresse électronique
                                    <span class="fr-hint-text">Format attendu : nom@exemple.fr</span>
                                </label>
                                <input class="fr-input" type="email" id="login-email" name="_username" value="{{ last_username }}" required>
                            </div>

                            <div class="fr-input-group">
                                <label class="fr-label" for="login-password">
                                    Mot de passe
                                </label>
                                <input class="fr-input" type="password" id="login-password" name="_password" required>
                            </div>

                            <div class="fr-checkbox-group">
                                <input type="checkbox" id="remember-me" name="_remember_me">
                                <label class="fr-label" for="remember-me">
                                    Se souvenir de moi
                                </label>
                            </div>
                            <br>
                            <div class="fr-btns-group fr-btns-group--inline-sm">
                                <button class="fr-btn" type="submit">
                                    Se connecter
                                </button>
                                <a class="fr-btn fr-btn--tertiary-no-outline" href="{{ path('app_forgot_password') }}">
                                    Mot de passe oublié ?
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Formulaire de création de compte -->
        <div class="fr-col-12 fr-col-lg-6">
            <div class="fr-card fr-card--no-arrow">
                <div class="fr-card__body">
                    <div class="fr-card__content">
                        <h2 class="fr-card__title">Créer un compte</h2>
                        <p class="fr-card__desc fr-mb-4v">
                            Première inscription ? Créez votre compte pour accéder à la plateforme d'inscription.
                        </p>
                        <hr class="fr-hr fr-mb-4v">

                        <form class="fr-form" method="post" action="{{ path('app_register') }}">
                            <!-- Civilité -->
                            <div class="fr-select-group">
                                <label class="fr-label" for="register-civilite">
                                    Civilité
                                </label>
                                <select class="fr-select" id="register-civilite" name="civilite" required>
                                    <option value="" selected disabled>Sélectionner</option>
                                    <option value="mr">Monsieur</option>
                                    <option value="mme">Madame</option>
                                </select>
                            </div>

                            <!-- Nom et Prénom -->
                            <div class="fr-grid-row fr-grid-row--gutters">
                                <div class="fr-col-12 fr-col-md-6">
                                    <div class="fr-input-group">
                                        <label class="fr-label" for="register-nom">
                                            Nom
                                        </label>
                                        <input class="fr-input" type="text" id="register-nom" name="nom" required>
                                    </div>
                                </div>
                                <div class="fr-col-12 fr-col-md-6">
                                    <div class="fr-input-group">
                                        <label class="fr-label" for="register-prenom">
                                            Prénom
                                        </label>
                                        <input class="fr-input" type="text" id="register-prenom" name="prenom" required>
                                    </div>
                                </div>
                            </div>

                            <!-- Email -->
                            <div class="fr-input-group">
                                <label class="fr-label" for="register-email">
                                    Adresse électronique
                                    <span class="fr-hint-text">Cette adresse servira d'identifiant</span>
                                </label>
                                <input class="fr-input" type="email" id="register-email" name="email" required>
                            </div>

                            <!-- Date de naissance -->
                            <div class="fr-input-group">
                                <label class="fr-label" for="register-birth">
                                    Date de naissance
                                </label>
                                <input class="fr-input" type="date" id="register-birth" name="date_naissance" required>
                            </div>

                            <!-- Téléphone -->
                            <div class="fr-input-group">
                                <label class="fr-label" for="register-telephone">
                                    Téléphone
                                    <span class="fr-hint-text">Format : 0123456789</span>
                                </label>
                                <input class="fr-input" type="tel" id="register-telephone" name="telephone" required pattern="[0-9]{10}">
                            </div>

                            <!-- Adresse -->
                            <div class="fr-input-group">
                                <label class="fr-label" for="register-adresse">
                                    Adresse
                                </label>
                                <input class="fr-input" type="text" id="register-adresse" name="adresse" required>
                            </div>

                            <!-- Département -->
                            <div class="fr-input-group">
                                <label class="fr-label" for="register-departement">
                                    Département
                                    <span class="fr-hint-text">Code postal ou nom du département</span>
                                </label>
                                <input class="fr-input" type="text" id="register-departement" name="departement" required>
                            </div>

                            <!-- Mot de passe -->
                            <div class="fr-input-group">
                                <label class="fr-label" for="register-password">
                                    Mot de passe
                                    <span class="fr-hint-text">Minimum 8 caractères avec au moins une majuscule, une minuscule et un chiffre</span>
                                </label>
                                <input class="fr-input" type="password" id="register-password" name="password" required minlength="8">
                            </div>

                            <!-- Confirmation mot de passe -->
                            <div class="fr-input-group">
                                <label class="fr-label" for="register-password-confirm">
                                    Confirmer le mot de passe
                                </label>
                                <input class="fr-input" type="password" id="register-password-confirm" name="password_confirm" required minlength="8">
                            </div>

                            <!-- Acceptation CGU -->
                            <div class="fr-checkbox-group">
                                <input type="checkbox" id="accept-terms" name="accept_terms" required>
                                <label class="fr-label" for="accept-terms">
                                    J'accepte les <a href="#" target="_blank" class="fr-link">conditions générales d'utilisation</a> et la <a href="#" target="_blank" class="fr-link">politique de confidentialité</a>
                                </label>
                            </div>
                            <br>
                            <button class="fr-btn fr-btn--lg" type="submit">
                                Créer mon compte
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Section informations importantes -->
<section class="fr-container fr-py-6v">
    <div class="fr-grid-row">
        <div class="fr-col-12">
            <h2 class="fr-h2 fr-mb-4v">Informations importantes</h2>
        </div>
    </div>
    
    <div class="fr-grid-row fr-grid-row--gutters">
        <div class="fr-col-12 fr-col-md-4">
            <div class="fr-card fr-card--no-border fr-card--no-background">
                <div class="fr-card__body">
                    <div class="fr-card__content">
                        <h3 class="fr-card__title">
                            <span class="fr-icon-calendar-line fr-icon--lg fr-mr-2v" aria-hidden="true"></span>
                            Calendrier 2025
                        </h3>
                        <div class="fr-card__desc">
                            <ul class="fr-list">
                                <li><strong>15 janvier :</strong> Ouverture des inscriptions</li>
                                <li><strong>31 mars :</strong> Clôture des inscriptions</li>
                                <li><strong>15 mai :</strong> Résultats d'admission</li>
                                <li><strong>Septembre :</strong> Rentrée scolaire</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="fr-col-12 fr-col-md-4">
            <div class="fr-card fr-card--no-border fr-card--no-background">
                <div class="fr-card__body">
                    <div class="fr-card__content">
                        <h3 class="fr-card__title">
                            <span class="fr-icon-file-text-line fr-icon--lg fr-mr-2v" aria-hidden="true"></span>
                            Pièces justificatives
                        </h3>
                        <div class="fr-card__desc">
                            <ul class="fr-list">
                                <li>Pièce d'identité</li>
                                <li>Diplômes et relevés de notes</li>
                                <li>CV et lettre de motivation</li>
                                <li>Justificatif de domicile</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="fr-col-12 fr-col-md-4">
            <div class="fr-card fr-card--no-border fr-card--no-background">
                <div class="fr-card__body">
                    <div class="fr-card__content">
                        <h3 class="fr-card__title">
                            <span class="fr-icon-question-line fr-icon--lg fr-mr-2v" aria-hidden="true"></span>
                            Besoin d'aide ?
                        </h3>
                        <div class="fr-card__desc">
                            <p class="fr-mb-2v">
                                Notre équipe support est disponible pour vous accompagner.
                            </p>
                            <a class="fr-btn fr-btn--secondary fr-btn--sm" href="{{ path('app_contact') }}">
                                Nous contacter
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



<!-- Alerte de sécurité -->
<section class="fr-container fr-pb-6v">
    <div class="fr-alert fr-alert--warning">
        <h3 class="fr-alert__title">Sécurité de votre compte</h3>
        <p>
            Pour votre sécurité, utilisez un mot de passe robuste et unique. Ne partagez jamais vos identifiants de connexion.
            En cas de problème, contactez immédiatement notre service technique.
        </p>
    </div>
</section>
{% endblock %}