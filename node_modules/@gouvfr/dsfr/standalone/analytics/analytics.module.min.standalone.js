/*! DSFR v1.14.0 | SPDX-License-Identifier: MIT | License-Filename: LICENSE.md | restricted use (see terms and conditions) */
const t="fr",e="dsfr",s=e=>`${t}-${e}`;s.selector=(t,e)=>(void 0===e&&(e="."),`${e}${s(t)}`),(s.attr=t=>`data-${s(t)}`).selector=(t,e)=>{let i=s.attr(t);return void 0!==e&&(i+=`="${e}"`),`[${i}]`},s.event=t=>`${e}.${t}`,s.emission=(t,e)=>`emission:${t}.${e}`;const i={AUTO:"auto",MANUAL:"manual",RUNTIME:"runtime",LOADED:"loaded",VUE:"vue",ANGULAR:"angular",REACT:"react"},n={},r=t=>!0!==n.internals.configuration.production&&(t>1||n.internals.configuration.verbose);n.inspector={log:(...t)=>r(0)?console.log.apply(console,t):null,debug:(...t)=>r(1)?console.debug.apply(console,t):null,info:(...t)=>r(2)?console.info.apply(console,t):null,warn:(...t)=>r(3)?console.warn.apply(console,t):null,error:(...t)=>r(4)?console.error.apply(console,t):null};const a=window[e];n.internals={ns:s,configuration:a},n.Modes=i,n.mode=a.mode||i.AUTO,window[e]=n;const o=window[e],h="a4e35ba2a938ba9d007689dbf3f46acbb9807869",l={MANUAL:"manual",LOAD:"load",FULL:"full",HASH:"hash"},c="_EA_",u=`${c}disabled`,_=`${c}toggle`;const g=new class{constructor(){this._configure()}_configure(){const t=this;window[u]=()=>t.isDisabled,window[_]=this.toggle.bind(this)}get isDisabled(){return localStorage.getItem(c)}toggle(){this.isDisabled?this.enable():this.disable()}enable(){localStorage.getItem(c)&&localStorage.removeItem(c)}disable(){localStorage.setItem(c,"1")}},d="EA_push";class p{constructor(t){this._domain=t,this._isLoaded=!1,this._promise=new Promise((t,e)=>{this._resolve=t,this._reject=e})}get id(){return this._id}get store(){return this._store}configure(){return this.init(),this._promise}init(){let t=5381;for(let e=this._domain.length-1;e>0;e--)t=33*t^this._domain.charCodeAt(e);t>>>=0,this._id=`_EA_${t}`,this._store=[],this._store.eah=this._domain,window[this._id]=this._store,window[d]||(window[d]=(...t)=>this.store.push(t)),g.isDisabled?(o.inspector.warn("User opted out, eulerian is disabled"),this._reject("User opted out, eulerian is disabled")):this.load()}load(){const t=new Date/1e7|0,e=t%26,s=String.fromCharCode(97+e,122-e,65+e)+t%1e3;this._script=document.createElement("script"),this._script.ea=this.id,this._script.async=!0,this._script.addEventListener("load",this.loaded.bind(this)),this._script.addEventListener("error",this.error.bind(this)),this._script.src=`//${this._domain}/${s}.js?2`;const i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(this._script,i)}error(){o.inspector.error("unable to load Eulerian script file. the domain declared in your configuration must match the domain provided by the Eulerian interface (tag creation)"),this._reject("eulerian script loading error")}loaded(){this._isLoaded||(this._isLoaded=!0,this._resolve())}}const m=-1,f=0,b=1,y=2,v=3;class E{constructor(t){this._config=t,this._state=m,this._promise=new Promise((t,e)=>{this._resolve=t,this._reject=e})}configure(){if(this._state>=b)return this._promise;this._state===m&&(o.inspector.info("analytics configures tarteaucitron"),this._state=f);const t=window.tarteaucitron;if(!t||!t.services)return void window.requestAnimationFrame(this.configure.bind(this));this._state=b;const e={key:"eulerian",type:"analytic",name:"Eulerian Analytics",needConsent:!0,cookies:["etuix"],uri:"https://eulerian.com/vie-privee",js:this.init.bind(this),fallback:()=>{t.services.eulerian.js()}};return t.services.eulerian=e,t.job||(t.job=[]),t.job.push("eulerian"),this._promise}init(){if(this._state>=y)return;this._state=y,window.__eaGenericCmpApi=this.integrate.bind(this);const t=this.update.bind(this);window.addEventListener("tac.close_alert",t),window.addEventListener("tac.close_panel",t)}integrate(t){this._state>=v||(this._state=v,this._cmpApi=t,o.inspector.info("analytics has integrated tarteaucitron"),this._resolve(),this.update())}update(){this._state<v||this._cmpApi("tac",window.tarteaucitron,1)}}class w{constructor(t){if(this._config=t,t&&"tarteaucitron"===t.id)this.integrateTarteAuCitron()}integrateTarteAuCitron(){return this._tac=new E(this._config),this._tac.configure()}optin(){}}const A=(t,e)=>{"function"==typeof window.EA_push?(o.inspector.info("analytics",t,e),window.EA_push(t,e)):o.inspector.warn("Analytics datalayer not sent, Eulerian API isn't yet avalaible")},N={COLLECTOR:"collector",ACTION:"action",ACTION_PARAMETER:"actionparam"};const O=new class{constructor(){this._renderables=[],this._rendering=this.render.bind(this),requestAnimationFrame(this._rendering)}add(t){-1===this._renderables.indexOf(t)&&this._renderables.push(t)}remove(t){const e=this._renderables.indexOf(t);e>-1&&this._renderables.splice(e,1)}render(){this._renderables.forEach(t=>t.render()),requestAnimationFrame(this._rendering)}},L={ENFORCE:"enforce",PREVENT:"prevent",NONE:"none"};class C{constructor(t,e){this._action=t,this._data=e}test(t){return this._action===t}start(){return this._action.start(this._data)}end(){return this._action.end(this._data)}}const T=new class{constructor(){this._startingActions=[],this._endingActions=[],this._handlingVisibilityChange=this._handleVisibilityChange.bind(this),this._handlingEnd=this._handleEnd.bind(this),this._isStarted=!1,this._isListening=!1,this.reset()}setCollector(t){this._collector=t}reset(t=!1){this._type=N.ACTION,t||(this._startingActions.length=0),this._endingActions.length=0,this._count=0,this._delay=-1,this._isRequested=!1,this._unlisten()}start(){this._isStarted||(this._isStarted=!0,O.add(this))}collect(){this._type=N.COLLECTOR,this._request()}regulate(t,e){if(!t)return!1;if(e.some(e=>e.test(t)))return o.inspector.log("action exists in queue",t),!1;switch(t.regulation){case L.PREVENT:return!1;case L.ENFORCE:return!0;default:return!0===this._collector.isActionEnabled}}appendStartingAction(t,e){if(!this.regulate(t,this._startingActions))return;const s=new C(t,e);this._startingActions.push(s),this._request()}appendEndingAction(t,e){if(!this.regulate(t,this._endingActions))return;const s=new C(t,e);this._endingActions.push(s),this._request()}_request(){this._listen(),this._isRequested=!0,this._delay=4}_listen(){this._isListening||(this._isListening=!0,document.addEventListener("visibilitychange",this._handlingVisibilityChange),document.addEventListener("unload",this._handlingEnd),document.addEventListener("beforeunload",this._handlingEnd),document.addEventListener("pagehide",this._handlingEnd))}_unlisten(){this._isListening&&(this._isListening=!1,document.removeEventListener("visibilitychange",this._handlingVisibilityChange),document.removeEventListener("unload",this._handlingEnd),document.removeEventListener("beforeunload",this._handlingEnd),document.removeEventListener("pagehide",this._handlingEnd))}_handleVisibilityChange(t){"hidden"===document.visibilityState&&this.send()}_handleEnd(){this.send()}render(){if(!(this._delay<=-1))switch(this._delay--,this._count++,!0){case this._count>20:case 0===this._delay:this.send()}}send(t=!1){if(!this._isRequested)return;const e=[];t||e.push(...this._startingActions.map(t=>t.start()).filter(t=>t.length>0)),e.push(...this._endingActions.map(t=>t.end()).filter(t=>t.length>0));const s=e.length/80+1|0,i=[];for(let t=0;t<s;t++){const s=e.slice(80*t,80*(t+1));i.push(s.flat())}if(this._type===N.COLLECTOR&&this._collector.isCollecting){const t=this._collector.layer;if(i.length>0){const e=i.splice(0,1)[0];e.length>0&&t.push.apply(t,e)}t.flat(),t.length>0&&A(N.COLLECTOR,t)}if(i.length>0)for(let t=0;t<i.length;t++){const e=i[t];e.length>0&&A(N.ACTION,e)}this.reset(t)}};const D=new class{get debugger(){return window._oEa}get isActive(){return!!this.debugger&&"1"===this.debugger._dbg}set isActive(t){this.debugger&&this.isActive!==t&&this.debugger.debug(t?1:0)}},$={CONNECTED:{id:"connected",value:"connecté",isConnected:!0,isDefault:!0},ANONYMOUS:{id:"anonymous",value:"anonyme",isConnected:!1,isDefault:!0},GUEST:{id:"guest",value:"invité",isConnected:!1}},j={INDIVIDUAL:{id:"individual",value:"part"},PROFESSIONNAL:{id:"professionnal",value:"pro"}};var R={"0x0022":"＂","0x0024":"＄","0x0026":"＆","0x0027":"＇","0x002a":"＊","0x002c":"，","0x003c":"＜","0x003e":"＞","0x003f":"？","0x005c":"＼","0x005e":"＾","0x0060":"｀","0x007c":"｜","0x007e":"～"};const S=t=>t?t=(t=(t=[...t].map(t=>R[(t=>{const e=t.charCodeAt(0).toString(16);return"0x0000".slice(0,-e.length)+e})(t)]||t).join("")).replace(/\s+/g," ").replace(/\s/g,"_")).toLowerCase():t,x=(t,e,s=!0)=>{switch(!0){case"number"==typeof t:return`${t}`;case"string"==typeof t:return t;case void 0===t&&s:case null===t&&s:return""}return o.inspector.warn(`unexpected value '${t}' set at analytics.${e}. Expecting a String`),null},k=(t,e,s=!0)=>{switch(!0){case!isNaN(t):return t;case"string"==typeof t&&!isNaN(Number(t)):return Number(t);case void 0===t&&s:case null===t&&s:return-1}return o.inspector.warn(`unexpected value '${t}' set at analytics.${e}. Expecting a Number`),null},I=(t,e)=>{switch(!0){case"boolean"==typeof t:return t;case"string"==typeof t&&"true"===t.toLowerCase():case"1"===t:case 1===t:return!0;case"string"==typeof t&&"false"===t.toLowerCase():case"0"===t:case 0===t:return!1;case void 0===t:case null===t:return t}return o.inspector.warn(`unexpected value '${t}' set at analytics.${e}. Expecting a Boolean`),null},U=(t,e,s=!0)=>{switch(!0){case"string"==typeof t&&/^[A-Za-z]{2}$|^[A-Za-z]{2}[-_]/.test(t):return t.split(/[-_]/)[0].toLowerCase();case void 0===t&&s:case null===t&&s:return""}return o.inspector.warn(`unexpected value '${t}' set at analytics.${e}. Expecting language as a String following ISO 639-1 format`),null},M=(t,e,s=!0)=>{switch(!0){case"string"==typeof t:return/^FR-[A-Z0-9]{2,3}$/.test(t)||o.inspector.warn(`value '${t}' set at analytics.${e} with wrong format. Geographic location should be a String following ISO 3166-2:FR format`),t;case void 0===t&&s:case null===t&&s:return""}return o.inspector.warn(`unexpected value '${t}' set at analytics.${e}. Expecting geographic location as a String following ISO 3166-2:FR format`),null},P=t=>t.toISOString().split("T")[0];class q{constructor(t){this._config=t||{}}reset(t=!1){this._isConnected=!1,this.status=$.ANONYMOUS,!t&&this._config.connect?this.connect(this._config.connect.uid,this._config.connect.email,this._config.connect.isNew):(this._uid=void 0,this._email=void 0,this._isNew=!1),this.profile=t?void 0:this._config.profile,this.language=t?void 0:this._config.language,this.type=t?void 0:this._config.type}connect(t,e,s=!1){this._uid=x(t,"user.uid"),/^[a-zA-Z0-9!#$%&'*+/=?^_`{|}~.-]{2,}@[a-zA-Z0-9-]{2,}\.[a-zA-Z]{2,}$/.test(e)&&o.inspector.warn("Please check analytics.user.email is properly encrypted "),this._email=x(e,"user.email"),this._isNew=I(s),this._isConnected=!0,this.status=$.CONNECTED}get uid(){return this._uid}get email(){return this._email}get isNew(){return this._isNew}set status(t){const e=Object.values($).filter(t=>t.isConnected===this._isConnected);this._status=e.filter(e=>e.id===t||e.value===t)[0]||e.filter(t=>t.isDefault)[0]}get status(){return this._status.id}set profile(t){const e=x(t,"user.profile");null!==e&&(this._profile=e)}get profile(){return this._profile.id}set language(t){const e=U(t,"user.language");null!==e&&(this._language=e)}get language(){return this._language||navigator.language}set type(t){this._type=Object.values(j).filter(e=>e.id===t||e.value===t)[0]}get type(){return this._type.id}get layer(){const t=[];return this.uid&&t.push("uid",S(this.uid)),this.email&&t.push("email",S(this.email)),this.isNew&&t.push("newcustomer","1"),this.language&&t.push("user_language",this.language),t.push("user_login_status",this._status.value),this._profile&&t.push("profile",this._profile),this._type&&t.push("user_type",this._type.value),t}}q.Status=$,q.Type=j;const V={DEVELOPMENT:{id:"development",value:"dev"},STAGE:{id:"stage",value:"stage"},PRODUCTION:{id:"production",value:"prod"}};class F{constructor(t){this._config=t||{}}reset(t=!1){this.environment=t?V.DEVELOPMENT.id:this._config.environment,this.entity=t?void 0:this._config.entity,this.language=t?void 0:this._config.language,this.target=t?void 0:this._config.target,this.type=t?void 0:this._config.type,this.region=t?void 0:this._config.region,this.department=t?void 0:this._config.department,this.version=t?void 0:this._config.version,this._api=o.version}set environment(t){switch(t){case V.PRODUCTION.id:case V.PRODUCTION.value:this._environment=V.PRODUCTION;break;case V.STAGE.id:case V.STAGE.value:this._environment=V.STAGE;break;case V.DEVELOPMENT.id:case V.DEVELOPMENT.value:default:this._environment=V.DEVELOPMENT}}get environment(){return this._environment?this._environment.id:V.DEVELOPMENT.id}set entity(t){const e=x(t,"site.entity");null!==e&&(this._entity=e)}get entity(){return this._entity}set language(t){const e=U(t,"site.language");null!==e&&(this._language=e)}get language(){return this._language||document.documentElement.lang}set target(t){const e=x(t,"site.target");null!==e&&(this._target=e)}get target(){return this._target}set type(t){const e=x(t,"site.type");null!==e&&(this._type=e)}get type(){return this._type}set region(t){const e=M(t,"site.region");null!==e&&(this._region=e)}get region(){return this._region}set department(t){const e=M(t,"site.department");null!==e&&(this._department=e)}get department(){return this._department}set version(t){const e=x(t,"site.version");null!==e&&(this._version=e)}get version(){return this._version}get api(){return this._api}get layer(){const t=[];return t.push("site_environment",this._environment.value),this.entity?t.push("site_entity",S(this.entity)):o.inspector.warn("entity is required in analytics.site"),this.language&&t.push("site_language",this.language),this.target&&t.push("site_target",S(this.target)),this.type&&t.push("site_type",S(this.type)),this.region&&t.push("site_region",this.region),this.department&&t.push("site_department",this.department),this.version&&t.push("site_version",this.version),this.api&&t.push("api_version",this.api),t}}F.Environment=V;const G={accordion:o.internals.ns.selector("accordion"),alert:o.internals.ns.selector("alert"),badge:o.internals.ns.selector("badge"),breadcrumb:o.internals.ns.selector("breadcrumb"),button:o.internals.ns.selector("btn"),callout:o.internals.ns.selector("callout"),card:o.internals.ns.selector("card"),checkbox:o.internals.ns.selector("checkbox-group"),connect:o.internals.ns.selector("connect"),consent:o.internals.ns.selector("consent-banner"),content:o.internals.ns.selector("content-media"),download:o.internals.ns.selector("download"),follow:o.internals.ns.selector("follow"),footer:o.internals.ns.selector("footer"),header:o.internals.ns.selector("header"),highlight:o.internals.ns.selector("highlight"),input:o.internals.ns.selector("input-group"),link:o.internals.ns.selector("link"),modal:o.internals.ns.selector("modal"),navigation:o.internals.ns.selector("nav"),notice:o.internals.ns.selector("notice"),pagination:o.internals.ns.selector("pagination"),quote:o.internals.ns.selector("quote"),radio:o.internals.ns.selector("radio-group"),search:o.internals.ns.selector("search-bar"),select:o.internals.ns.selector("select"),share:o.internals.ns.selector("share"),sidemenu:o.internals.ns.selector("sidemenu"),stepper:o.internals.ns.selector("stepper"),summary:o.internals.ns.selector("summary"),tab:o.internals.ns.selector("tabs"),table:o.internals.ns.selector("table"),tag:o.internals.ns.selector("tag"),tile:o.internals.ns.selector("tile"),toggle:o.internals.ns.selector("toggle"),tooltip:o.internals.ns.selector("tooltip"),transcription:o.internals.ns.selector("transcription"),translate:o.internals.ns.selector("translate"),upload:o.internals.ns.selector("upload-group")},H="collectable",z="collecting",B="collected";class Z{constructor(t){this._config=t||{},this._state=H}reset(t=!1){this.path=t?"":this._config.path,this.referrer=t?"":this._config.referrer,this.title=t?"":this._config.title,this.name=t?"":this._config.name,this.id=t?"":this._config.id,this.author=t?"":this._config.author,this.date=t?"":this._config.date,this._labels=t||!this._config.labels?["","","","",""]:this._config.labels,this._labels.length=5,this._tags=t||!this._config.tags?[]:this._config.tags,this._categories=t||!this._config.categories?["","",""]:this._config.categories,this.isError=!t&&this._config.isError,this.template=t?"":this._config.template,this.group=t?"":this._config.group,this.segment=t?"":this._config.segment,this.subtemplate=t?"":this._config.subtemplate,this.theme=t?"":this._config.theme,this.subtheme=t?"":this._config.subtheme,this.related=t?"":this._config.related,this.depth=t||isNaN(this._config.depth)?0:this._config.depth,this.current=t||isNaN(this._config.current)?-1:this._config.current,this.total=t||isNaN(this._config.total)?-1:this._config.total,this._filters=t||!this._config.filters?[]:this._config.filters}collecting(){return this._state!==H?(o.inspector.warn(`current path '${this.path}' was already collected`),!1):(this._state=z,!0)}get isCollecting(){return this._state===z}set path(t){const e=x(t,"page.path");null!==e&&(this._path=e,this._state=H)}get path(){return this._path||`${document.location.pathname}${document.location.search}`}set referrer(t){const e=x(t,"page.referrer");null!==e&&(this._referrer=e)}get referrer(){return this._referrer}set title(t){const e=x(t,"page.title");null!==e&&(this._title=e)}get title(){return this._title||document.title}set id(t){const e=x(t,"page.id");null!==e&&(this._id=e)}get id(){return this._id}set author(t){const e=x(t,"page.author");null!==e&&(this._author=e)}get author(){return this._author}set date(t){const e=((t,e,s=!0)=>{switch(!0){case t instanceof Date:return P(t);case"string"==typeof t:{const e=new Date(t);if("Invalid Date"!==e.toString())return P(e);break}case void 0===t&&s:case null===t&&s:return null}return o.inspector.warn(`unexpected value '${t}' set at analytics.${e}. Expecting a Date`),null})(t,"page.date");null!==e&&(this._date=e)}get date(){return this._date}get tags(){return this._tags}set name(t){const e=x(t,"page.name");null!==e&&(this._name=e)}get name(){return this._name||this.title}get labels(){return this._labels}get categories(){return this._categories}set isError(t){const e=I(t,"page.isError");null!==e&&(this._isError=e)}get isError(){return this._isError}set template(t){const e=x(t,"page.template");null!==e&&(this._template=e)}get template(){return this._template||"autres"}set segment(t){const e=x(t,"page.segment");null!==e&&(this._segment=e)}get segment(){return this._segment||this.template}set group(t){const e=x(t,"page.group");null!==e&&(this._group=e)}get group(){return this._group||this.template}set subtemplate(t){const e=x(t,"page.subtemplate");null!==e&&(this._subtemplate=e)}get subtemplate(){return this._subtemplate}set theme(t){const e=x(t,"page.theme");null!==e&&(this._theme=e)}get theme(){return this._theme}set subtheme(t){const e=x(t,"page.subtheme");null!==e&&(this._subtheme=e)}get subtheme(){return this._subtheme}set related(t){const e=x(t,"page.related");null!==e&&(this._related=e)}get related(){return this._related}set depth(t){const e=k(t,"page.depth");null!==e&&(this._depth=e)}get depth(){return this._depth}set current(t){const e=k(t,"page.current");null!==e&&(this._current=e)}get current(){return this._current}set total(t){const e=k(t,"page.total");null!==e&&(this._total=e)}get total(){return this._total}get filters(){return this._filters}get layer(){this._state=B;const t=[];this.path&&t.push("path",S(this.path)),this.referrer&&t.push("referrer",S(this.referrer)),this.title&&t.push("page_title",S(this.title)),this.name&&t.push("page_name",S(this.name)),this.id&&t.push("page_id",S(this.id)),this.author&&t.push("page_author",S(this.author)),this.date&&t.push("page_date",S(this.date));const e=Object.keys(G).map(t=>null!==document.querySelector(G[t])?t:null).filter(t=>null!==t).join(",");e&&t.push("page_components",e);const s=this._labels.slice(0,5);s.length=5,s.some(t=>t)&&t.push("pagelabel",s.map(t=>"string"==typeof t?S(t):"").join(","));const i=this._tags;if(i.some(t=>t)&&t.push("pagetag",i.map(t=>"string"==typeof t?S(t):"").join(",")),this._categories.forEach((e,s)=>{e&&t.push(`page_category${s+1}`,e)}),this._isError&&t.push("error","1"),t.push("page_template",S(this.template)),t.push("pagegroup",S(this.group)),t.push("site-segment",S(this.segment)),this.subtemplate&&t.push("page_subtemplate",S(this.subtemplate)),this.theme&&t.push("page_theme",S(this.theme)),this.subtheme&&t.push("page_subtheme",S(this.subtheme)),this.related&&t.push("page_related",S(this.related)),isNaN(this.depth)||t.push("page_depth",this.depth),!isNaN(this.current)&&this.current>-1){let e=`${this.current}`;!isNaN(this.total)&&this.total>-1&&(e+=`/${this.total}`),t.push("page_pagination",e)}if(this.filters.length&&this.filters.some(t=>t)){const e=this.filters.map(t=>"string"==typeof t?S(t):"");t.push("page_filters",e.join(","))}return t}}const J={STANDARD:{id:"standard",value:"standard",isDefault:!0},AUTOCOMPLETE:{id:"autocomplete",value:"autocompletion"}};class W{constructor(t){this._config=t||{}}reset(t=!1){this.engine=t?void 0:this._config.engine,this.results=t||isNaN(this._config.results)?-1:this._config.results,this.terms=t?void 0:this._config.terms,this.category=t?void 0:this._config.category,this.theme=t?void 0:this._config.theme,this.type=t?void 0:this._config.type,this.method=t?void 0:this._config.method}set engine(t){const e=x(t,"search.engine");null!==e&&(this._engine=e)}get engine(){return this._engine}set results(t){const e=k(t,"search.results");null!==e&&(this._results=e)}get results(){return this._results}set terms(t){const e=x(t,"search.terms");null!==e&&(this._terms=e)}get terms(){return this._terms}set category(t){const e=x(t,"search.category");null!==e&&(this._category=e)}get category(){return this._category}set theme(t){const e=x(t,"search.theme");null!==e&&(this._theme=e)}get theme(){return this._theme}set type(t){const e=x(t,"search.type");null!==e&&(this._type=e),this._type=t}get type(){return this._type}set method(t){const e=Object.values(J);this._method=e.filter(e=>e.id===t||e.value===t)[0]||e.filter(t=>t.isDefault)[0]}get method(){return this._method}get layer(){const t=[];return this.engine&&t.push("isearchengine",S(this.engine)),this.results>-1&&t.push("isearchresults",this.results),this.terms&&t.push("isearchkey","search_terms","isearchdata",S(this.terms)),this.category&&t.push("isearchkey","search_category","isearchdata",S(this.category)),this.theme&&t.push("isearchkey","search_theme","isearchdata",S(this.theme)),this.type&&t.push("isearchkey","search_type","isearchdata",S(this.type)),this._method&&t.length&&t.push("isearchkey","search_method","isearchdata",this._method.value),t}}W.Method=J;class Y{constructor(t){this._config=t||{}}reset(t=!1){this.id=t?void 0:this._config.id,this.type=t?void 0:this._config.type,this.name=t?void 0:this._config.name,this.step=t?void 0:this._config.step,this.current=t||isNaN(this._config.current)?-1:this._config.current,this.total=t||isNaN(this._config.total)?-1:this._config.total,this.objective=t?void 0:this._config.objective,this.error=t?void 0:this._config.error}set id(t){const e=x(t,"funnel.id");null!==e&&(this._id=e)}get id(){return this._id}set type(t){const e=x(t,"funnel.type");null!==e&&(this._type=e)}get type(){return this._type}set name(t){const e=x(t,"funnel.name");null!==e&&(this._name=e)}get name(){return this._name}set step(t){const e=x(t,"funnel.step");null!==e&&(this._step=e)}get step(){return this._step}set current(t){const e=k(t,"funnel.current");null!==e&&(this._current=e)}get current(){return this._current}set total(t){const e=k(t,"funnel.total");null!==e&&(this._total=e)}get total(){return this._total}set objective(t){const e=x(t,"funnel.objective");null!==e&&(this._objective=e),this._objective=t}get objective(){return this._objective}set error(t){const e=x(t,"funnel.error");null!==e&&(this._error=e),this._error=t}get error(){return this._error}get layer(){const t=[];return this.id&&t.push("funnel_id",S(this.id)),this.type&&t.push("funnel_type",S(this.type)),this.name&&t.push("funnel_name",S(this.name)),this.step&&t.push("funnel_step_name",S(this.step)),!isNaN(this.current)&&this.current>-1&&t.push("funnel_step_number",this.current),!isNaN(this.total)&&this.total>-1&&t.push("funnel_step_max",this.total),this.objective&&t.push("funnel_objective",S(this.objective)),this.error&&t.push("funnel_error",S(this.error)),t}}const K={IN:"in",OUT:"out",NONE:"none"},Q={id:"unstarted",value:-1},X={id:"started",value:1},tt={id:"singular",value:2},et={id:"ended",value:3},st=t=>Object.entries(t).map(([t,e])=>["actionpname",S(t),"actionpvalue",S(e)]).flat();class it{constructor(t){this._isMuted=!1,this._regulation=L.NONE,this._name=t,this._status=Q,this._labels=[],this._parameters={},this._sentData=[]}get isMuted(){return this._isMuted}set isMuted(t){this._isMuted=t}get regulation(){return this._regulation}set regulation(t){Object.values(L).includes(t)&&(this._regulation=t)}get isSingular(){return this._status===tt}get status(){return this._status}get name(){return this._name}get labels(){return this._labels}get reference(){return this._reference}get parameters(){return this._parameters}get mode(){return this._mode}singularize(){this._status=tt}rewind(){this._sentData=[],this._status=Q}addParameter(t,e){this._parameters[t]=e}removeParameter(t){delete this._parameters[t]}set reference(t){const e=x(t,`action ${this._name}`);null!==e&&(this._reference=e)}get _base(){return["actionname",this._name]}_getLayer(t={}){if(this._isMuted)return[];this._mode!==K.IN&&this._sentData.push(JSON.stringify(t));const e=this._base;switch(this._mode){case K.IN:case K.OUT:e.push("actionmode",this._mode)}const s=this._labels.slice(0,5);return s.length=5,s.some(t=>t)&&e.push("actionlabel",s.map(t=>"string"==typeof t?S(t):"").join(",")),this._reference&&e.push("actionref",this._reference),e.push.apply(e,st(Object.assign(this._parameters,t||{}))),e}start(t){switch(this._status){case Q:this._mode=K.IN,this._status=X;break;case tt:this._mode=K.NONE,this._status=et;break;default:return o.inspector.error(`unexpected start on action ${this._name} with status ${this._status.id}`),[]}return this._getLayer(t)}end(t){switch(this._status){case X:this._mode=K.OUT,this._status=et;break;case Q:case tt:this._mode=K.NONE,this._status=et;break;case et:if(this._sentData.includes(JSON.stringify(t)))return[];this._mode=K.NONE,this._status=et;break;default:return[]}return this._getLayer(t)}resume(t){if(this._isMuted)return[];if(this._status.value>=et.value)return o.inspector.error(`unexpected resuming on action ${this._name} with status ${this._status.id}`),[];const e=this._base;return t&&e.push.apply(e,st(t)),e}}class nt{constructor(){this._actions=[]}rewind(){this._actions.forEach(t=>t.rewind())}getAction(t){let e=this._actions.filter(e=>e.name===t)[0];return e||(e=new it(t),this._actions.push(e)),e}hasAction(t){return this._actions.some(e=>e.name===t)}remove(t){const e=this._actions.indexOf(t);return-1!==e&&(this._actions.splice(e,1),!0)}}nt.ActionMode=K;const rt=new nt;nt.instance=rt;class at{constructor(t,e=!1){this._onRouteChange=t,this._isListeningHash=e,this._update(),O.add(this)}_update(){this._pathname=document.location.pathname,this._search=document.location.search,this._hash=document.location.hash,this._path=`${this._pathname}${this._search}`,this._isListeningHash&&(this._path+=this._hash),this._hasTitle=this._title===document.title,this._title=document.title}render(){this._pathname===document.location.pathname&&this._search===document.location.search||this.change(),this._isListeningHash&&this._hash!==document.location.hash&&this.change()}change(){this._referrer=this._path,this._update(),this._onRouteChange()}get path(){return this._path}get hasTitle(){return this._hasTitle}get title(){return this._title}get referrer(){return this._referrer}}const ot={COLLECT:o.internals.ns.event("collect")},ht={REWIND:o.internals.ns.emission("analytics","rewind")},lt={ENABLE:{entries:["enable","enabled","true","yes","1",!0],value:!0,output:!0},DISABLE:{entries:["disable","disabled","false","no","0",!1],value:!1,output:!1},REDUCE:{entries:["reduce"],value:"reduce",output:!1}};class ct{constructor(t){switch(t.collection){case l.MANUAL:case l.LOAD:case l.FULL:case l.HASH:this._collection=t.collection;break;default:if(t.mode&&"manual"===t.mode)this._collection=t.collection;switch(!0){case"manual"===t.mode:this._collection=l.MANUAL;break;case o.mode===o.Modes.ANGULAR:case o.mode===o.Modes.REACT:case o.mode===o.Modes.VUE:this._collection=l.FULL;break;default:this._collection=l.LOAD}}this.isActionEnabled=t.isActionEnabled,this._user=new q(t.user),this._site=new F(t.site),this._page=new Z(t.page),this._search=new W(t.search),this._funnel=new Y(t.funnel),this._delay=-1,T.setCollector(this)}get page(){return this._page}get user(){return this._user}get site(){return this._site}get search(){return this._search}get funnel(){return this._funnel}start(){const t=this._handleRouteChange.bind(this);switch(this._collection){case l.LOAD:this.collect();break;case l.FULL:this.collect(),this._location=new at(t);break;case l.HASH:this.collect(),this._location=new at(t,!0)}}_handleRouteChange(){T.send(!0),this._delay=6,O.add(this)}render(){this._delay--,this._delay<0&&(O.remove(this),this._routeChanged())}_routeChanged(){rt.rewind(),this._page.referrer=this._location.referrer,this._location.hasTitle&&(this._page.title=this._location.title),this._page.path=this._location.path;const t=new CustomEvent(ot.COLLECT);document.documentElement.dispatchEvent(t),this.collect(),o.internals&&o.internals.stage&&o.internals.stage.root&&o.internals.stage.root.descend(ht.REWIND)}reset(t=!1){this._user.reset(t),this._site.reset(t),this._page.reset(t),this._search.reset(t),this._funnel.reset(t)}collect(){this.page.collecting()&&T.collect()}get collection(){return this._collection}get isCollecting(){return this._page.isCollecting}get isActionEnabled(){return this._isActionEnabled.value}set isActionEnabled(t){this._isActionEnabled=Object.values(lt).find(e=>e.entries.includes(t))||lt.DISABLE}get isActionReduced(){return this._isActionEnabled===lt.REDUCE}get layer(){return[...this._user.layer,...this._site.layer,...this._page.layer,...this._search.layer,...this._funnel.layer]}}const ut=new class{constructor(){this._isReady=!1,this._readiness=new Promise((t,e)=>{this._isReady?t():(this._resolve=t,this._reject=e)}),this._configure()}_configure(){switch(!0){case void 0!==window[h]:this._config=window[h].configuration.analytics,window[h].promise.then(this._build.bind(this),()=>{});break;case void 0!==o.internals&&void 0!==o.internals.configuration&&void 0!==o.internals.configuration.analytics&&void 0!==o.internals.configuration.analytics.domain:this._config=o.internals.configuration.analytics,this._build();break;case void 0!==o.analytics&&void 0!==o.analytics.domain:this._config=o.analytics,this._build();break;default:o.inspector.warn("analytics configuration is incorrect or missing (required : domain)")}}_build(){this._init=new p(this._config.domain),this._init.configure().then(this._start.bind(this),t=>this._reject(t))}get isReady(){return this._isReady}get readiness(){return this._readiness}_start(){this._isReady||(this._cmp=new w(this._config.cmp),this._collector=new ct(this._config),this._collector.reset(),this._isReady=!0,this._resolve(),T.start(),this._collector.start())}get page(){return this._collector.page}get user(){return this._collector.user}get site(){return this._collector._site}get search(){return this._collector.search}get funnel(){return this._collector.funnel}get cmp(){return this._cmp}get opt(){return g}get collection(){return this._collector.collection}get isActionEnabled(){return this._collector.isActionEnabled}set isActionEnabled(t){this._collector.isActionEnabled=t}get isDebugging(){return D.isActive}set isDebugging(t){D.isActive=t}push(t,e){A(t,e)}reset(t=!1){this._collector.reset()}collect(){this._collector.collect()}};ut.Collection=l,ut.PushType=N,n.analytics=((t,...e)=>(e.forEach(e=>{const s=Object.keys(e).reduce((t,s)=>(t[s]=Object.getOwnPropertyDescriptor(e,s),t),{});Object.getOwnPropertySymbols(e).forEach(t=>{const i=Object.getOwnPropertyDescriptor(e,t);i.enumerable&&(s[t]=i)}),Object.defineProperties(t,s)}),t))(ut,{});
